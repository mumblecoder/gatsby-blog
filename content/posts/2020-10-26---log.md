---
title: 효율적인 로그 기록법
date: "2020-10-26T21:57:11.492Z"
template: "post"
draft: false
slug: "log"
category: "Daily"
tags:
  - "Java"
description: "로그를 어떤 방식으로 어떤 내용을 기록해야하는지 알아보자"
---

### 로그의 목적
- 서비스 동작 상태 파악
- 장애 파악 & 알람
- 서비스 지표의 확인, 트랙잭션, 성능 등 다양한 정보를 확인

### 좋은 로그 시스템
- 로그 메시지는 애플리케이션의 동작을 잘 이해할 수 있도록 충분히 구체적이어야 한다. 
- 로그 메시지를 기록하는데 성능 저하가 없어야 한다. 
- 어떤 배포 환경이라도 로그를 수집하고 저장할 수 있도록 충분히 유연해야 한다. (분산 환경 지원, 대용량 데이타 지원등)


### 시스템 로그는 남기지 말자
- System.out.println() 메서드를 사용한 시스템 로그가 가장 편하고, 확인하기 좋은 방법이지만 성능에 영향을 많이 주는 경우가 빈번히 발생한다.
- 내용이 완전히 프린트되거나 저장될 때까지, 뒤에 프린트하려는 부분은 대기 할 수밖에 없다. 특히 콘솔에 로그를 남길 경우에는 더더욱 그렇다. 그렇게 되면 애플리케이션에서는 대기 시간이 발생한다. 이 대기 시간은 시스템의 속도에 의존적이다. 만약 디스크에 로그를 남긴다면, 서버 디스크의 RPM이 높을수록 로그의 처리 속도는 빨라질 것이다.
- System.out.println()으로 출력하는 로그는 개발할 때만 사용된다. 운영할 때는 전혀 사용되지 않고, 볼 수도 없는 디버그용 로그를 운영 서버에서 고스란히 처리하고 있는 셈이다.

### 로그를 깔끔하게 처리해주는 slf4j
- 간단히 로그를 처리해주는 프레임워크
- 자바의 기본 로거를 비롯하여 Log4j, 아파치 commons 로깅등과 연계하여 사용할 수 있도록 되어 있다.
- 기존 로거들과 달리 slf4j는 format 문자열에 중괄호를 넣고, 그 순서대로 출력하고자 하는 데이터들을 콤마로 구분하여 전달해준다.
- 로그를 출력하지 않을 경우 필요 없는 문자열 더하기 연산이 발생하지 않는다.
```java
logger.error("message : {}", e.getMessage());
```

<hr>

> Reference
- [로그는 반드시 필요한 내용만 찍자](https://yangbongsoo.gitbook.io/study/undefined/log)

