---
title: 20.08.25 - Java Issue
date: "2020-08-25T12:32:52.482Z"
template: "post"
draft: false
slug: "java-issue"
category: "Daily"
tags:
  - "Java"
description: "Java의 기본적인 이슈 6가지에 대해서 알아보자"
---

1. 자바의 기본. JDK, JRE, JVM
    - JDK : 자바 개발 도구, JVM용 소프트웨어 개발 도구
    - JRE : 자바 실행 환경, JVM용 OS
    - JVM : 자바 가상 머신, 가상의 컴퓨터
    - JDK를 이용해 개발된 프로그램은 JRE에 의해 가상의 컴퓨터인 JVM상에서 구동된다.
    - JDK가 JRE를 포함하고 JRE는 JVM을 포함하는 형태로 배포된다.
    - JDK는 자바 소스 컴파일러인 javac.exe를 포함하고 있고, JRE는 자바 프로그램 실행기인 java.exe.를 포함하고 있다.

2. 메모리는 어떻게 사용되는가
    - 프로그램에게 할당된 메모리 영역을 크게 코드 실행 영역과, 데이터 저장 영역으로 나누어 사용한다.
    - 객체지향 프로그램에서는 데이터 저장영역을 static, stack, heap영역으로 분할해 사용한다.

<br>


3. 자바 main메서드를 실행하면 메모리에서 어떤일이 일어나는가
    - 일단 JRE는 프로그램 안에 main메서드가 있는지 확인한다.
    - main메서드의 존재가 확인되면 JVM에 전원을 넣어 부팅하고 프로그램 실행을 위한 사전 준비에 들어간다.
    - 부팅된 JVM은 목적 파일을 받아 그 목적 파일을 실행한다.
    - JVM은 가장 먼저 java.lang 패키지를 스태틱 영역에 가져다 놓는다.
    - 다음으로 개발자가 작성한 모든 클래스와 import package도 static 영역에 가져다 놓는다.
    - 클래스와 import package들은 main메서드에서 클래스를 사용할 때 스태틱 영역에 로드된다.
    - 이제 main메서드를 실행하기 위해 스택 영역에 스택 프레임을 할당한다. 스택 프레임은 메서드의 여는 중괄호'{'를 만날때마다 하나씩 생기는 것이다.
    - 그리고 넘겨져 들어온 인자를 저장하기 위해 스택 프레임 맨 밑에 확보한다.
    - 메소드내의 작업을 모두 마치고 닫는 중괄호'}'를 만나면 스택 프레임을 소멸시킨다.
    - main메서드는 프로그램의 시작점이자 끝이다. main메서드가 끝이 나면 JVM을 종료하고 JRE자체도 운영체제상의 메모리에서 사라진다.


4. 각종 변수들과 메소드들은 메모리상 어디에 위치하는가?
    - 자바의 변수는 지역 변수, 클래스 멤버 변수, 객체 멤버 변수가 있다.
    - 지역 변수는 스택 영역안의 스택 프레임안에 존재한다. 스택 프레임이 사라지면 소멸된다.
    - 클래스 멤버 변수는 스태틱 영역에 위치한다. JVM에 의해 클래스가 로딩될때 함께 로딩되며 한 번 자리를 잡으면 JVM이 종료될 때까지 고정된 상태로 위치한다. 멤버 변수 앞에 static키워드가 붙으면 클래스 멤버 속성이 된다.
    - 객체 멤버 변수는 힙에 위치한다. GC에 의해 메모리 회수가 이루어지기전까지 객체와 함께 존재한다.
    - 객체 멤버 메서드는 한 번 로딩되면 인스턴스 모두가 공유하는 코드가 된다. 즉 인스턴스에 따라 상태가 변화하지 않고, static 영역에 로딩된다.
    
5. 메모리 구조 측면에서의 멀티 스레드와 멀티 프로세스 이해
    - 멀티 스레드의 메모리 모델은 스택 영역을 스레드 개수만큼 분할해서 쓰는 것이다.
    - 멀티 프로세스는 다수의 데이터 저장영역, 즉 프로세스 개수 만큼 다수의 메모리를 갖는 구조이다.
    - 멀티 프로세스의 경우, 각 프로세스마다 각각 고유의 공간이므로 서로 참조할 수 없다.
    - 멀티 스레드는 스택 영역만 분할한 것이기 때문에 하나의 스레드에서 다른 스레드의 스택영역에는 접근할 수 없지만, 스태틱 영역과 힙 영역은 공유해서 사용하는 구조이다. 그래서 멀티 프로세스 대비 메모리를 적게 사용할 수 있는 구조이다.

6. 자바는 Call by Value이다.
    - 객체는 Call by Reference라고 착각하기 쉽지만 그렇게 보일뿐 실제는 Call by Value이다.
    - 메소드에 객체를 전달하여 메소드 안에서 객체의 상태를 변화시키면 메소드 밖에서도 상태가 변해있기 때문에 착각할 수 있다.
    - 자바에서는 메소드에 객체를 넘겨줄때 객체가 실제 저장되어 있는 메모리상의 주소값이 아닌 동일한 객체를 가리키는 또 다른 레퍼언스를 복사하여 전달하는 방식이다.
    - 메소드 안에서는 객체를 가리키고 있는 주소**값**을 받은 것이므로 Call by Value이다.

<hr>

> Reference
- [자바의 기본적인 이슈들 5가지](https://asfirstalways.tistory.com/m/329?category=660807)
